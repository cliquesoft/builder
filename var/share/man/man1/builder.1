.\"Man page for builder, by Dave Henderson.
.TH pax 1 "2026 February 04"
.SH NAME
\fIbuilder\fR - package builder




.SH SYNOPSIS
.B builder [OPTIONS] ACTION NAME

ACTIONS:
  -b   build a distributable package
  -c   compile the software only, no packaging
  -d   download the builder profile (uses URL_REPO)
  -i   install the builder profile
  -p   create a builder profile
  -r   only re-package software instead of building
  -t   create a package template: info, profile

  --help      shows this screen
  --version   displays the software version

OPTIONS:
  -A   the CPU architecture to build: a32,a64,i32,i64,r32,r64,all (default)
  -C   obtain source code from:
          dev(eloper)|dir(ectory)|git(clone)|(distro)repo
  -D   package using directories in DIR_DUMP instead of NAME value
  -F   skips packaging until final pass
  -I   download the package info file and use its locations
  -M   the compile type to use:
          autoconf
          autogen
          bootstrap
          cmake
          custom
          default (configure, make, make install)
          scons
  -N   the number of passes to make when compiling
  -P   prevent patching from occurring
  -R   remove a portion of NAME when packaging; can use regex anchors
  -S   package all contents in a single package - do NOT separate
  -U   do not unload compilation packages afterwards




.SH TOC
1.  DESCRIPTION
2.  CONFIGS
3.  PARAMETERS
4.  ACTIONS
5.  OPTIONS
6.  EXAMPLES
7.  BUGS
8.  COPYRIGHT
9.  AUTHORS




.SH DESCRIPTION
.I builder
was created to not only make it easier to compile software, but to also
enable a quick way to distribute the means of doing so. Imagine having a
very small file that contains the dependencies and instructions required
to compile (for various CPU architectures), one or more places to obtain
the source code, any desired patches, and any additional files to include
in an installation (e.g. desktop files). That file, which is known as a
"builder profile", can be parsed by builder to automatically carry out
each of those steps, with an optional final process of creating packages
for distribution - making this suitable for normal end users and package
maintainers alike! By simply making the builder profile available, anyone
can quickly and effortlessly compile any software by issuing a single,
short command!

[package maintainers]
It is important to note that this software will not magically determine
all of the steps outlined above and do it for you. Someone has to actually
outline this process in an initial builder profile (ideally being the
software developer). This project is meant to provide an easy way to use
the contributions of others who have taken those steps, and allow package
maintainers of each distro to quickly tweak the profile to fit their own
system. This makes it trivial to modify the compile parameters, add or
remove patches, add or remove graphics, include GUI desktop files, and
other items to specifically tailor a software build.

[software developers]
Builder works with a variety of popular methods of compilation including
autoconf, autogen, bootstrap, cmake, scons, and a default (configure,
make, make install). There is even an option to create a custom method if
you require it. This allows you the freedom to choose which one will work
best for you and your project.

While builder does not make any stage of development easier for you, its
main design goal is to make it VERY easy for an end user to compile your
software, or aid in the rapid distribution of your project to qualified
package maintainers of the various Linux distros. By constructing a
(generic) builder profile for your work, you are helping to streamline
the steps necessary for them to tailor your software to their specific
environment. We would encourage any developer to include this as a zip or
tarball packaged with their source code, or at least an option to download
from their website.




.SH CONFIGS
There are several configuration files that are used with builder. The main
file is used to define global variable and default profile values, and is
typically located in '/etc/builder'. To provide flexibility, there are
three additional directories that are permissible. Each can exist and also
modify the values: '/usr/local/etc/builder', '~/.etc/builder' (XSB), and
'~/.builder' (LSB). None of these variables can be adjusted using passed
values to builder.

The other configuration file is included in each builder profile. There
are some overlaping of values as stated above, but also several that are
unique. Unlike the global config, there is only one place that this file
can be stored - the root of the profile. However, this file can utilize
a numeric extension to designate different values depending on the number
of passes a software needs to be fully compiled. This extension needs to
correspond with the pass. So, if a single pass is required, the filename
should remain as 'config' with no extension. If a software requires two or
more passes, there should be an equal number of files using the naming
convention 'config.1', 'config.2', etc, each with their own configuration
definitions that correspond to the pass number. None of these variables
can be adjusted using passed values to builder.

While not a configuration file, there is one other file that needs to be
discussed. This file also would reside alongside the 'config' in each
builder profile, and is named 'params'. Like its associated 'config', this
file can also have numeric file extensions for multi-pass profiles. The
function of this file is to define the parameter values that should be
passed to builder when building software. This will prevent mistakes by
end users who would not know what values to pass. For example, if the
software required two passes, instead of informing every end user to pass
'-N 2', you can simply add a 'PASS=2' value in this file and builder will
acknowledge that for the absence of the passed parameter.

To summarize:
  o The global config search order:
    /etc/builder, /usr/local/etc/builder, ~/.etc/builder, ~/.builder
  o The profile config naming convention:
    config[.1, .2, ...]
    params[.1, .2, ...]

Before explaining each variable in detail, it is important to note that
some of these values can contain variables themselves (if desired). Those
that fall within this scope must have their value enclosed with single
quotes (') as they are interprited at specific times of execution instead
of the initial loading of the script. The variables for use are:
  ${NAME} - package name
  ${ARCH} - devices' CPU architecture
  ${TYPE} - package type (e.g. bin, doc, lib, etc)
  ${PASS} - current pass number
We will now cover each variable available for adjustment in the config
files, noting when any of the above variables can be utilized.




.I Global Config

.B DEBUG
To see the commands that take place while builder is being executed, set
this value to 1. The log will then contain that additional information.


.B DIR_DUMP
As the name suggests, this is the staging area that is used to dump the
compiled program into before making the (various) package(s) for
distribution.

.B DIR_INST
Similar to the PREFIX value when compiling, this value allows a directory
structure to be injected into the overall path where the compiled software
will reside. In an LSB environment, this value will be '/usr/local' for
everything that i's not part of the OS. If using XSB, then this value will
remain blank since packages can be installed in multiple locations, each
mirroring the same directory structure.

.B DIR_PROF
This variable stores the location of the builder profiles, and should NOT
include the NAME variable as part of its value.

.B DIR_REPO
If the user elects to create distributable packages (using the -b action),
then this directory is used to store those generated files. This directory
is also used when passing '-C dir' as the location where the source code
currently resides.

.B DIR_TEMP
The directory that is used for temporary files created during the building
process.


.B DEP_MAKE_ALL
There are always packages that need to be installed in order to compile
software. This variable lists any and all that are essential to this task.
For example, if your distro packages are squashfs files, then one of the
items in this list should be 'squashfs-tools'. There is a complimentary
variable in the other config file where packages specific to that software
can be defined.


.B EXT_BLDR
[tgz file] The file extension used for the package builder profile. These
values can utilize any of the naming variables listed at the top of this
section and should be enclosed with single quotes (').

.B EXT_CODE
[tgz file] The file extension used for a package source code

.B EXT_DEPS
[text file] The file extension used for the package dependency list

.B EXT_HASH
[text file] The file extension used for the package validation hash

.B EXT_INFO
[text file] The file extension used for the package details info

.B EXT_LIST
[text file] The file extension used for the package manifest info

.B EXT_MAKE
[text file] The file extension used for the package make commands

.B EXT_SOFT
[mksquashfs file] The file extension of the actual packaged software


.B OWN_USER
If the software is simply being compiled (using the -c action), then this
value will be ignored. When a distributable package is being created, this
is used to apply that ownership to the files and directories. This value
can be either usernames or their numeric equivalents. Although this will
be applied to everything in the package, finite modifications of ownership
can be applied using the 'pre.package' script.

.B OWN_GROUP
Like the OWN_USER, this is also part of the ownership of the data within
the packages, but for group ownership.


.B PRM_DIRS
Working in conjunction with the OWN_* values, these three provide the
permissions that get applied to various parts of the package. In this
case, the value here gets applied to all the directories. The value can be
in numeric form (using three or four digits) or using symbols (e.g. u+rX).
Specific modifications can also be implemented using the 'pre.package'
script.

.B PRM_EXECS
The permissions for binaries/executables

.B PRM_FILES
The permissions for all other files


.B URL_INFO
In order for builder to perform some of its steps, it needs access to the
proper information. Some of this information can be stored in a .info file
created by a Linux distribution. This variable stores the URL to that file
so it can be downloaded and processed by builder. These two values can
utilize any of the naming variables listed at the top of this section and
should be enclosed with single quotes (').

.B URL_REPO
This URL should point to the package source code for the Linux distro.


.B SPM_ALL
Working with the DEP_MAKE_ALL variable, this one stores the actual command
to install the packages listed. The DEP_MAKE_ALL variable needs to be part
of this value.

.B SPM_PACK
Like SPM_ALL, this variable is also responsible for the installation of
dependencies. However, this one works with the DEP_MAKE_PAK value defined
in the builder profile 'config' file.

.B SPM_MAKE
The command listed for this variable needs to be all the commands required
to create the package file(s). There are several variables available for
use with this command:
  ${ID}       - directory or package name (depending on the configuration)
  ${TYPE}     - package type (e.g. bin, doc, drv, etc)
  ${PAK_DEPS} - the interpreted package deps file extension
  ${PAK_HASH} - the interpreted package hash file extension
  ${PAK_INFO} - the interpreted package info file extension
  ${PAK_LIST} - the interpreted package list file extension
  ${PAK_SOFT} - the interpreted package soft file extension

.B SPM_UNLD
To maintain a tidy environment, include the command to unload the packages
listed in the DEP_MAKE_ALL and/or DEP_MAKE_PAK variables. A blank value
disables this process.


.B LOG
The log file for all executions of builder


.B SUDO
Depending on the account used to run builder, the use of sudo may be
required to perform an installation, or ownership and permission change of
the files when packaging. If the executing account does not have sufficent
privileges, you can set this value to 'TRUE'. If you require switches to
be passed to sudo, you can also list them here (e.g. SUDO='sudo -x -y -z).


.B PATH_PKGCFG
This directory contains temp files used by the software.


.B FLAG_A32
These are the compile flags for ARM 32bit CPU architectures

.B FLAG_A64
These are the compile flags for ARM 64bit CPU architectures

.B FLAG_I32
These are the compile flags for Intel/AMD 32bit CPU architectures

.B FLAG_I64
These are the compile flags for Intel/AMD 64bit CPU architectures

.B FLAG_R32
These are the compile flags for Raspberry Pi 32bit CPU architectures

.B FLAG_R64
These are the compile flags for Raspberry Pi 64bit CPU architectures

NOTE: the above flags can be universally set in the main config file, with
per-instance adjustments made in the builder profile config. These values
can also incorporate any of the special variables outlined at the top of
this section, as well as PATH_PKGCFG.

This configuration file can also contain all the variables in the below
section that begin with DIR_ and CFG_, and will act at the defaults.




.I Profile Config

Each of these variables can also be defined in the global config as the
default values used, with the ones in this file being specific instances
where deviation is required. It is important to note that these values
should include the DIR_INST variable so that any desired directory prefix
can be applied to the installation path (e.g. /usr/local)

.B DIR_BIN
The directory used to store general use binaries

.B DIR_ETC
The directory used to store software configurations

.B DIR_LIB
The directory used to store common use libraries

.B DIR_SBIN
The directory used to store elevated privileged binaries

.B DIR_SHARE
The directory used to store common use files

.B DIR_VAR
The directory used to store variable data files

.B DIR_MARKERS
The directory used to store installed package (cache) data

.B DIR_SCRIPTS
The directory used to store service start/stop scripts


.B CFG_BIN="${DIR_INST}/bin"
The configure scripts directory location for general use binaries

.B CFG_DATA="${DIR_INST}/share"
The configure scripts directory location for common use files

.B CFG_DATAROOT="${CFG_DATA}"
The configure scripts directory location for common use files

.B CFG_DOC="${CFG_DATA}/doc/${NAME}"
The configure scripts directory location for documentation files

.B CFG_DVI="${CFG_DOC}"
The configure scripts directory location for print related files

.B CFG_HTML="${CFG_DOC}"
The configure scripts directory location for HTML-based doc files

.B CFG_INCLUDE="${DIR_INST}/include"
The configure scripts directory location for compiling header files

.B CFG_INFO="${CFG_DATA}/info"
The configure scripts directory location for documentation files

.B CFG_LIB="${DIR_INST}/lib"
The configure scripts directory location for common use libraries

.B CFG_LIBEXEC="${DIR_INST}/libexec"
The configure scripts directory location for executable libraries

.B CFG_LOCALE="${CFG_DATA}/locale"
The configure scripts directory location for region specific files

.B CFG_LOCALSTATE="${DIR_INST}/var"
The configure scripts directory location for variable data files

.B CFG_MAN="${CFG_DATA}/man"
The configure scripts directory location for documentation files

.B CFG_OLDINCLUDE="${DIR_INST}/include"
The configure scripts directory location for compiling header files

.B CFG_PDF="${CFG_DOC}"
The configure scripts directory location for documentation files

.B CFG_PS="${CFG_DOC}"
The configure scripts directory location for documentation files

.B CFG_SBIN="${DIR_INST}/sbin"
The configure scripts directory location for elevated privileged binaries

.B CFG_SHAREDSTATE="${DIR_INST}/com"
The configure scripts directory location for shared state files

.B CFG_SYSCONFIG="${DIR_INST}/etc"
The configure scripts directory location for software configurations

.B CFG_MISC
This variable is unique to the builder profile config only, NOT the global
configuration! This value gets added to the 'configure' call so this value
needs to have its switch included. For example, mplayer has a non-standard
switch to place its codecs. Simply add "--codec-dir='/whatever/dir'" for
this variable value to use it.


The variables below are specific to the builder profile config file and
define various aspects for the individual software.

.B CHECK
Indicates that a 'make check' command needs to be run; 0=no, 1=yes

.B CLEAN
Indicates that a 'make clean' command needs to be run. A value of '2' indicates
that a 'make distclean' needs to be run instead; 0=no, 1=yes, 2=yes

.B CONF
Indicates that a 'configure' command needs to be run; 0=no, 1=yes

.B PROP
Indicates that a 'make mrproper' command needs to be run; 0=no, 1=yes

.B TEST
Indicates that a 'make test' command needs to be run; 0=no, 1=yes

.B SORT
Indicates the package contents need sorting (on this pass); a blank value
means no, any other value means yes.

.B CODE
This variable is optional and should only be used when compiling more than
one software with a single builder profile. For example you can compile
both alsa-libs and alsa-utils with a single 'builder -b alsa' command if
the config.1 file CODE value is 'alsa-libs' and config.2 file CODE value
is 'alsa-utils'. This value would uniquely identify which source code
directory to use per pass.


.B GIT_REPO
The URL to the developers source code located in a git repo. This value is
optional, but does allow '-C git' to be passed. If the software requires a
multi-pass, this needs to be in the config.1 file since the source needs
to be downloaded in the first pass.

.B URL_CODE
Same as above, but the URL to a non-git (homepage) download link, allowing
a '-C dev' to be passed. To make this easier, it is recommended to use a
constant name for this value (e.g. domain.com/software/latest|stable).
Obviously this would be up to the software author to institute such a
naming convention.


.B CUSTOM
If the compile type is 'custom', you need to specify all commands here.
For example: gcc -O foo
This variable can contain any of the special variables outlined in the top
of this section. Just be sure to surround it with single quotes when doing
so!


.B DEP_MAKE_PAK
Most software needs one or more dependencies installed in order to compile
successfully. Use this variable to list each that are required (separated
using a single space).


.B DEP_EXEC_BIN
When creating multiple distributable files (versus creating a single file)
for a particular software title, this variable will store each dependency
for the binaries package. The values for each of these variables needs to
be a space separated list of names.
If a single distributable package is desired, each of these variables will
be added to the .deps file to have the complete run-time list required for
any aspect of the package to function properly.

.B DEP_EXEC_DEV
Like DEP_EXEC_BIN, this package stores the development headers for this
software. This value needs to store any dependencies for this package.

.B DEP_EXEC_GIR
Just like the two above, the list here needs to pertain to the gir files
package.

.B DEP_EXEC_LIB
Lastly, this variable holds the dependency list for the shared libraries
package.


.B FLAG_CONF
Used in conjunction with the CFG_* variables outlined above, this value
should store any additional parameters you wish to pass to 'configure'.
Typically this will just be the '--prefix' switch, but can be any valid
option that is desired.

.B FLAG_MAKE
This variable does the same as FLAG_CONF, but is passed to 'make'.
Typically this will just be the 'DESTDIR' value, but can be any valid
option that is desired.

.B FLAG_INST
Sharing the same function as the above two, this value gets passed to the
'make install' call.

NOTE: the FLAG_* variables outlined above for the various CPU achitectures
can be added in this file also. See the appropriate section above for more
information.




.I Parameters File

.B ARCH
Specifying a value here is the equivalent to passing the '-A' option. By
default this value is 'i64'.

.B DIRS
Using this variable is the same as passing the '-D' option. The default is
to use the passed NAME parameter instead of the directory names, leaving
this value blank. See the OPTIONS section below for more information.

.B INFOFILE
This variable can be used in conjunction with the WGET counterpart below,
and would act like -I was passed. If WGET has a value, this one should be
set to TRUE as well so that the source code can be obtained from the
proper location (unless WGET='dir'). The default value is blank.

.B PASS
Indicating how many passes should be used with the profile, this is the
same as passing the '-N' option. The value here should be a number that
is 1 or greater, with a default of 1.

.B SKIP
To skip packaging the files until the final pass, this value is the same
as passing the '-F' option. The default is to leave this blank. Please
note that providing a value here also needs one for the PASS variable
above.

.B TRIM
Having a bit more complexity than the other variables in this file, this
one allows you to use regular expressions to trim a portion of the NAME
parameter, and is the equivalent of passing the '-R' option. The default
value is blank.

.B METHOD
Relating to the compilation method (-M), this variable needs to be one of
the valid word values instead of a simple binary. The default here is the
standard 'configure, make, make install'.

.B WGET
Finally, this variable corresponds to the '-C' option that specifies the
location to download the source code from. There is no default value.

You may have noticed that the -P and -U options do not have representation
in this file. Both of those switches should not affect the outcome of the
software compilation, and should be left to the user to apply them if
desired.




.SH PARAMETERS
There are at least two parameters that are necessary to start a task
successfully - an ACTION and a NAME. The only exception to providing a
NAME value is when using the '-t' action, which just creates a blank
template for any project. Otherwise, the NAME is used to identify which
directory to enter, which builder profile to use, etc. There are also
OPTIONS that can be used to modify execution behavior.

The last parameter builder can accept is DIRECTORY. Typically it operates
as the target location for the passed action, and is optional. To provide
flexibility for the user, there are several different syntaxes that are
permitted. Both full and relative paths are permissible, but the value
must contain a forward slash (/) to indicate it's a directory instead of a
package name. This will not be a problem with full paths as they obviously
start with one. Relative paths can either begin with a './', end with a
'/', or contain a slash within the value (e.g. 'some/dir').

To summarize, the DIRECTORY value can be:
  o A full path: /dir/builder/
  o Or a relative path: ./builder
    Containing a slash: dir/builder
    With a trailing slash: builder/




.SH ACTIONS
As with virtually all software, switches can be passed to modify its
operation. The below section covers each switch in detail, separating
the actions from the options. It is important to note that the options
actually need to proceed the actions when calling builder.

.B --help
Shows helpful information about the program

.B --version
Displays the software version and exits.

.B -c
Users can simply use a graphical file manager, or the 'cp' command at a
shell prompt to copy files. However, this would require manually tracing
dependency trees to copy all the necessary packages required to make a
program work correctly. This action reduces all that work into a single,
convenient command. If no PACKAGE(S) value is passed, then all packages
in the DIR_OPTION (or -S location) will be processed.

.B -d
There may be times when a package just needs to be downloaded so it can
be processed in the future. This could include network update servers,
software testing, or even pre-installed ondemand software for (device)
deployment scenarios. Using this action allows the packages to be
obtained before they are required.

.B -e
Similar to the -d ACTION, this switch will extract the contents of one or
more packages to a specified location. This can be useful in situations
where packages need to be (forensically) compared, imaging devices, or any
other situation requiring the extraction of package files. Without passing
a PACKAGE(S) value, all packages in the DIR_OPTION (or -S location) will
be processed.

It is important to note that this action will always overwrite data due to
the underlying binary being used.

.B -f FILES
While not a routine task, there may be times when it is useful to find the
package that a particular file belongs to. This action will allow you to
enter one or more files and search which local packages contains them.

.B -i
The cornerstone of all packages managers, this switch performs the actual
installation of packages so that users don't have to find, compile, and
install software themselves. The packages, or dependencies, can be local
or remote. If no PACKAGE(S) value is passed, then all packages in the
DIR_OPTION (or -S location) will be processed.
If speed is a necessity, and all packages and their dependencies are in
source directory, a '-D none' switch can be included to skip that check.

.B -l
To list the packages currently installed, use this switch. Currently the
output uses a verbose 2 line per package layout containing a plethora of
information about each package - provided the .info files are also present
in the DIR_INST directory. Users can pass specific packages to list, or
process all installed software without a PACKAGE(S) value.
NOTE: There are plans to reduce this to one line in a future version.

.B -m NAME DIRECTORY
This switch can be used to create a package file for distribution and will
bundle all the files in a passed directory. With the presence of a .make
file, pax will execute it to compile software before the packaging phase
takes place. This will enable package maintainers to include their .make
file alongside the packaged software so anyone can easily build from
source.

Unlike other switches, this one can only process one package at a time,
with the PACKAGE(S) value being used as the name of the created package.
This value can still be given in a text file, but only one name can be
included per execution. The other mandatory value is a DIRECTORY (or -S)
value to indicate the location of the files/source code to process.

If no .make file is present, then the passed directory will be considered
the root level for the package being created. If a .make file does exist,
then it needs to be named using the FILE_SCHEMA syntax with a .make file
extension, and placed directly inside the passed directory. Likewise, the
source code directory needs to be in the same location. Its name, however,
if of no value to pax since that will be handled by the .make script. The
compile process must install the created software into a staging directory
named 'project'. The layout should look like:
   /tmp/staging/
           PACKAGE.make
           PACKAGE-source-code-dir/
           project/

.B -o [NAME] [clear]
While there is not a package server manager yet, this switch will be used
by client devices to enable remote administration of packages. This will
be accomplished by using a value similar to:
   FIFO_SERVER='/sshfs/directory/device_NIC_MAC'
to enable network admins to remotely manage packages installed on devices
under their control, including the (un)installation, updating, and repair
of any software.

To give the fifo a different name, you can either modify the FIFO_SERVER
value in the config file, or pass a new name as a value to the -o switch.
In the event that a fifo was left behind due to some type of error, a
cleanup can be made by passing a trailing 'clear' to the pax command.

.B -t VALUE
Sometimes it is helpful to see dependency trees to packages. This switch
offers two different modes to show you this information. Using a value of
'relies' will display the dependencies that the passed package(s) rely on.
Contrarily, a value of 'reliant' will show all the packages that rely on
the ones passed.

.B -u VALUE
This action offers a range of uninstallation modes to handle your needs.
The first mode, 'unload', simply uninstalls the software files from your
device, leaving behind the config and package files for a quick reinstall.
The 'unlist' value performs the same tasks as 'unload', but additionally
removes the package from the LIST_LIVE (or -L list). If the software will
no longer be used, passing a 'delete' command will unlist and delete the
associated package files, leaving the configs untouched. To remove even
the package config files, use a 'purge' value to completely remove all
traces of the software from the device. Keep in mind that none of these
commands affect any data generated by the software, only the software
itself.

The last mode, is 'update', and as the name implies it's for updating
currently installed software to a new version. Unless overwritten, a
restore point is generated for the old version before the new one gets
installed. When performing this action, you need to be in the directory
containing the update so that the -S and DIRECTORY values can operate
as designed (the former being where the existing package file is located
and the latter being the path were the package is installed to).

To summarize:
  o 'unload' - removes application files
  o 'unlist' - unloads and removes LIST_LIVE (or -L) entry
  o 'delete' - unlists and removes package files
  o 'purge'  - deletes and removes config files
  o 'update' - unloads current version, installs new version

.B -v VALUE
There may be times when validating package data is necessary, especially
if software is malfunctioning. This action will enable you to validate the
package dependencies are installed by issuing a 'deps' value. It can also
validate that the files in a package are installed, have the appropriate
ownership/permissions, and either symlinked to the correct target, or that
each installed file is legitimate. Both tasks can be accomplished with a
'data' value, however, using 'hash' will extend validation of each copied
(not symlinked) file via hashes instead of the quicker comparison using
file sizes. The latter mode will take a bit longer to complete. If any
issues are found, you can use a 'fix' value to resolve them.

.B -z
This action is only useful when pax is installed in a distro using several
package managers, but it's not configured as the exclusive default. This
switch will sync the necessary cache files so that it can operate properly
in the OS. Even with this switch, alternating between various managers is
highly discouraged outside of testing environments.

If there are packages whose contents are installed some place other than
root, home, or DIR_LIVE, and have no installation marker, then make sure
to enter the root-level directory containing those files before executing
this action so that the packages can be properly processed.




.SH OPTIONS
To adjust the behavior of actions, you can pass one or more options with
each execution of pax. Remember that these actually need to proceed the
action switch!

.B -B
Used to indicate the device is booting so that packages can be processed
as configured using either a single or dual-phase installation. This also
sets DIRECTORY='/' and checks only REPO_SYSTEM. Users should never pass
this flag in a live environment.

.B -C VALUE
Specifies an alternative CPU architecture to process. This could be useful
for mixed 32/64 bit environments, or for building the OS for a different
target device.

.B -D VALUE
This switch controls how dependencies are processed. A value of 'none'
will prevent this step and affect only the packages pax is instructed to
process via a list, file, or directory. The 'default' value is the normal
mode of operation and will process dependencies. Some packages have
optional dependencies (e.g. documentation) that will also be processed by
using 'all' as the value. There is an additional mode, 'source', which
will work like 'default', but mandates that all the dependencies reside
in the passed -S location. It is impossible to combine the functionality
of 'all' and 'source' - at least presently.

To list packages as optional in the .deps file, use the following syntax:
   [OPTIONAL.EXT_SOFT|INSTALLLED.EXT_SOFT]

Unless '-D none' is used, the search order for dependencies is:
   REPO_SOURCE (-S), REPO_OPTION, REPO_SYSTEM, [REPO_SCHEMA]

.B -E VALUE[,VALUE,...]
In some cases a user might want more than the package files necessary
for an installation. For example, they may want a .make file to build
the package from source, or the .cpio file to include as part of the
base OS. Even downloading the .info file will provide extra package
info when using the -l action. Possible values include:
   all  - download all additional package files
   code - package source code
   cpio - initial ramdisk inclusion file
   info - package information
   list - package manifest listing
   make - package compile script

.B -F
Be careful with the inclusion of this option as it will force the action
to take place, even if dire consequences result!

.B -I VALUE[,VALUE,...]
In rare cases, there may be a need to ignore a dependency from getting
processed. For example, there may be a dependency that is still desired
to retain after another program that relies on it has been uninstalled.
Instead of adding a package to a flag file, this value can be passed
during the execution of pax.

.B -K VALUE
During normal operation, this flag would never be used since it changes
the kernel string attached to driver packages. However, if a kernel update
or an OS build for another device were required, this switch would become
useful.

.B -L VALUE
When installing a package, the default process adds the package to the
LIST_LIVE list. This can be foregone with a value of 'none', or placed
in the LIST_BOOT with a 'boot' value.

.B -M VALUE
Sets the mode for the installation of the package contents. The only two
values are 'copy' and 'link', with the latter referring to maintaining a
loopback mount to the package and symlinking its contents into the OS.
There are several advantages with this method including conservation of
storage space and the inability to manipulate a readonly file system.
This doesn't mean malicious activity can't take place, since symlinks can
be redirected, or replaced with an actual binary. But it does add some
more barriers.

If speed of operation is your primary goal, then you would want to use
the 'copy' value here, which is the default. If the OS uses a ramdisk,
then the speed is even greater than with attached storage.

.B -N VALUE[,VALUE,...]
For instances where storage space is at a premium, security is critical
(by miniming the attack vectors), or those that simply want the smallest
footprint possible, this option will allow only desired files to be
installed instead of the entire package. Using this switch will imply a
'-D none' value, so make sure that any lib packages necessary for the
desired files are also installed.

This can also be implemented within the .deps files themselves using the
following syntax:
   PACKAGE.EXT_SOFT{file1,file2,file3,...}

.B -O VALUE
Another unique feature of pax is that the output can be more than just the
default 'text'. Currently there are three other options with two of them
related to XML. The first is just 'xml' and will display the entire result
of the call at the end of execution. This means that the output will be
inside either a '<s>' (success) or '<f>' (failure) tag. The second is the
'xmLive' value that will display output as it is being processed, adding a
'<failure>' tag in the event of a problem being encountered.

The third additional option is 'fifo' that will output text to a named
pipe file. The long term goal is to build a server/client framework for
networks so that devices can be managed by an admin team using this
interface. Please note, that when using this value, the fifo must be
managed by the calling script or binary, and must use DIR_TEMP/output as
its location. This may be updated in future versions.

Since there may be a race condition while processing parameters, this one
should always be the first in the list to ensure the output is in the
format desired.

There are plans to also add 'json' and 'html' values in a future release.

.B -P
This switch simply prompts the user before implementing the requested
action, showing what is going to occur in the existing output.

.B -Q VALUE
Like most software that has the option to control verbosity, this switch
modifies the quietness of the output. Therefore, a value of 'all' will
actually produce no output, whereas a value of 'none' would make it the
most verbose it could be. Use 'errors' to reduce the output to only show
encountered problems, or 'verbose' to show slightly more than the default.

Since there may be a race condition while processing parameters, this one
should always be the first or second (if -O is also passed) in the list to
ensure the output is in the format desired.

.B -R VALUE
Without this flag, whatever action is passed works with the active local
or remote repo for packages. There may be instances where packages from
the restore points are desired. For example, lets say that a package got
updated on the device and now there's an issue. Until that issue can be
resolved, the user may want to rollback to their prior installation. To
accomplish this, the user simply needs to run pax with an appropriate -R
restore point value and the '-u update' action.

Another example may be where a user (accidentally) deleted software from
their device and now needs it replaced. This can be reversed by issuing
the -R switch with the corresponding restore point name and the -i action.

To view all the restore points use "-R '*' -l". To view the list within a
date, specify "-R 'YYYY-MM-DD' -l", or to see the packages contained in a
certain restore point, use "-R 'YYYY-MM-DD/Restore Point Name' -l". To
remove certain restore points, use the '-u {delete|purge}' action with the
date or complete path value for -R, to delete a group or individual point
respectively.

To summarize:
   o This option works with the -i, -l, and -u actions.
   o The prevent creating a restore point use '-R none' with -u
   o The format with -i is: 'YYYY-MM-DD/Restore Point Name'
   o The format with -l is: '*' or 'YYYY-MM-DD[/Restore Point Name]'
   o The format with -u is: 'YYYY-MM-DD[/Restore Point Name]'

.B -S VALUE
This switch changes the source location where the action obtains the
necessary packages. Depending on the action, this value may be a local
or network directory, or a remote repo (beginning with 'http' or 'ftp').

An interesting use of the -V, -S, and DIRECTORY values may be to perform
dianostics on an attached hard drive from another device.

.B -T VALUE
To prevent typing the full name of each package, this switch will fill in
this portion of the package name automatically. For example, lets say you
want to install the alsa-lib package. You can do so by using either the
full package name '-i alsa-lib' or '-T lib -i alsa'. This switch becomes
more pratical for a longer list of package names. Please note that all
packages listed must be of the same type.

.B -V VALUE
Sometimes unknown bugs are discovered once software is released to the
public, causing productivity issues. In this instance it is helpful to be
able to install a prior version, even temporarily until the problem can be
resolved. Using this switch will accomplish that task. The value to pass
will vary between distros as some may use actual software version numbers,
others may use values corresponding to releases of their OS. And like the
-m action, this one can also only process one package at a time.

This can also be implemented within the .deps files themselves using the
following syntax:
   PACKAGE.EXT_SOFT[1.2.3]

.B -X VALUE
Another unique feature of pax is the ability to proxy certain actions from
one device to another. This may be useful in situations where there is an
air gap between devices for security, or this may come in handy where the
Internet connection at a location is slow or intermittent but better at
another one.

This switch requires a value corresponding to the removable media mount
point so the pax command can be executed on another device. Once written,
plug the media in the other device and execute the 'proxy.sh' script found
in the 'pax' directory. Please note that the other device needs to also be
running Linux, or have the ability to process shell scripts. After running
the script, take the media back to the original device and run that same
script again. This will install the desired packages automatically.

Currently this switch can only work with the -c, -d, and -i actions.

.B -Y
If you want to see exactly what is going to take place before running the
actual command, use this switch to perform a dryrun. To get a complete log
of what will take place, add the '-Q none' switch and/or set DEBUG=1 in
the config file.

.B -Z
This switch simply adds color to the output.




.SH EXAMPLES

The below list shows various examples for using pax. This list is not
exhaustive and does not indicate modifications using any options.

Performing action with all packages [to current directory]:
     ${TEMP} -{ceilt}
Performing action with specific packages [to current directory]:
     ${TEMP} -{cdeilt} package1 package2
Performing action with package list [to current directory]:
     ${TEMP} -{cdeilt} packages.txt
Performing action with specific packages to/in a specified directory:
     ${TEMP} -{cdeilt} package1 package2 /target/path
Performing action with a package list to/in a specified directory:
     ${TEMP} -{cdeilt} packages.txt /target/path
Performing action with specific packages from/in a specified directory:
     ${TEMP} -S {URL|/source/path} -{cdeilt} package1 package2
Performing action with a package list from/in a specified directory:
     ${TEMP} -S {URL|/source/path} -{cdeilt} packages.txt
Performing action with all packages between specified directories:
     ${TEMP} -S {URL|/source/path} -{cdei} /target/path
Performing action with a package list between specified directories:
     ${TEMP} -S {URL|/source/path} -{cdei} packages.txt /target/path

Find files in available packages:
     ${TEMP} -f file1 file2
Find files in available packages from a filelist:
     ${TEMP} -f files.txt
Find files in packages within a specified directory:
     ${TEMP} -f file1 file2 /source/path
     ${TEMP} -S /source/path -f file1 file2
Install a specific version:
     ${TEMP} -V 1.2.3 -i package
Install a package from a valid restore point:
     ${TEMP} -R 'YYYY-MM-DD/Restore Point' -i package
List all restore points:
     ${TEMP} -R '*' -l
List all restore points in a valid date:
     ${TEMP} -R 'YYYY-MM-DD' -l
List all packages in a valid restore point:
     ${TEMP} -R 'YYYY-MM-DD/Restore Point' -l
Make a package for distribution:
     ${TEMP} -m package /path/containing/{package|source}
     ${TEMP} -S /path/containing/{package|source} -m package
     ${TEMP} -S /path/containing/{package|source} -m file
Open a fifo to operate pax:
     ${TEMP} -o
Open a fifo to operate pax in a specified directory:
     ${TEMP} -o /path/to/fifo
     ${TEMP} -S /path/to/fifo -o
Open a fifo to operate pax using a specific fifo:
     ${TEMP} -o name
Open a fifo to operate pax, clearing a prior failure:
     ${TEMP} -o clear
Open a fifo to operate pax, clearing and using specific fifo:
     ${TEMP} -o name clear
Proxy a download:
     ${TEMP} -X /mnt/sdb1 -d package1 package2
Proxy an install:
     ${TEMP} -X /mnt/sdb1 -i package1 package2
Unload a package:
     ${TEMP} -u unload package
Uninstall a package, leaving configs:
     ${TEMP} -u delete package
Uninstall a package, including configs too:
     ${TEMP} -u purge package
Uninstall a package, without a restore point:
     ${TEMP} -R none -u delete package
Update a package (uninstall old, install new):
     ${TEMP} -u update package
Delete a restore point(s):
     ${TEMP} -R 'DATE[/Restore Point]' -u {delete|purge}




.SH BUGS

There are no known bugs as of January 2026.

Please visit our website for the latest list of opened bug reports for
this software project - http://www.cliquesoft.org.



.SH COPYRIGHT

Copyright (C) 2016-2026 Cliquesoft

Unless a valid Cliquesoft Private License (CPLv1) has been purchased for your
device, this software is licensed under the Cliquesoft Public License (CPLv2)
as found on the Cliquesoft website at www.cliquesoft.org.

This program is distributed in the hope that it will be useful, but WITHOUT
ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS
FOR A PARTICULAR PURPOSE. See the appropriate Cliquesoft License for details.

You should have received a copy of the Cliquesoft Public License v2 with the
software itself; if not, please visit our website for the complete document:

   https://www.cliquesoft.org




.SH AUTHORS

Dave Henderson

